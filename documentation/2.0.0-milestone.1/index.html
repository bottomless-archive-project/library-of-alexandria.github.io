<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Library of Alexandria</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Library of Alexandria</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_system_requirements">System Requirements</a>
<ul class="sectlevel2">
<li><a href="#_collecting">Collecting</a></li>
<li><a href="#_indexing">Indexing</a></li>
</ul>
</li>
<li><a href="#_installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#_installing_java">Installing Java</a></li>
<li><a href="#_installing_mongodb">Installing MongoDB</a></li>
<li><a href="#_running_the_conductor_application">Running the Conductor Application</a></li>
<li><a href="#_running_the_staging_application">Running the Staging Application</a></li>
<li><a href="#_running_the_queue_application">Running the Queue Application</a></li>
<li><a href="#_running_the_vault_application">Running the Vault Application</a></li>
<li><a href="#_running_the_generator_application">Running the Generator Application</a></li>
<li><a href="#_running_the_downloader_application">Running the Downloader Application</a></li>
<li><a href="#_installing_elasticsearch">Installing Elasticsearch</a></li>
<li><a href="#_running_the_indexer_application">Running the Indexer Application</a></li>
<li><a href="#_running_the_web_application">Running the Web Application</a></li>
</ul>
</li>
<li><a href="#_applications">Applications</a>
<ul class="sectlevel2">
<li><a href="#_architectural_overview">Architectural overview</a></li>
<li><a href="#_application_parameters">Application parameters</a></li>
<li><a href="#_conductor_application">Conductor Application</a></li>
<li><a href="#_queue_application">Queue Application</a></li>
<li><a href="#_vault_application">Vault Application</a></li>
<li><a href="#_generator_application">Generator Application</a></li>
<li><a href="#_staging_application">Staging Application</a></li>
<li><a href="#_downloader_application">Downloader Application</a></li>
<li><a href="#_indexer_application">Indexer Application</a></li>
<li><a href="#_web_application">Web Application</a></li>
<li><a href="#_administrator_application">Administrator Application</a></li>
</ul>
</li>
<li><a href="#_disc_usage_patterns">Disc usage patterns</a>
<ul class="sectlevel2">
<li><a href="#_queue_data_directory">Queue Data Directory</a></li>
<li><a href="#_temporary_stage_folders">Temporary Stage Folders</a></li>
<li><a href="#_staging_data_directory">Staging Data Directory</a></li>
<li><a href="#_vault_data_directory">Vault Data Directory</a></li>
</ul>
</li>
<li><a href="#_domain_language">Domain Language</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="assets/images/logo-background.png" alt="logo background">
</div>
</div>
<div class="paragraph">
<p>Library of Alexandria (LoA in short) is a project that aims to collect and archive documents from the internet.</p>
</div>
<div class="paragraph">
<p>In our modern age new text documents are born in a blink of an eye then (often just as quickly) disappear from the internet. We find it a noble task to save these documents for future generations.</p>
</div>
<div class="paragraph">
<p>This project aims to support this noble goal in a scalable way. We want to make the archival activity streamlined and easy to do even in a huge (Terabyte / Petabyte) scale. This way we hope that more and more people can start their own collection helping the archiving effort.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Special emphasis was placed on to keep the prerequisites of the project to the minimum. This is because one of the main goals of the project is to make it easy to start archiving even with limited technical knowledge and resources.</p>
</div>
<div class="paragraph">
<p>List of the required software to start archiving:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">Java 18</a></p>
</li>
<li>
<p><a href="https://www.mongodb.com/download-center/community">MongoDB 6.0</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>List of the required software to be able to search the archived documents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.elastic.co/downloads/past-releases/elasticsearch-8-3-1">Elasticsearch 8.3.1</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_system_requirements">System Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s important to mention the hardware requirements of collecting and handling documents. If you only want to gather a few million documents then that could be done on a home PC. However, if you want to collect &amp; store a massive amount, then purpose-built hardware is necessary. Also, if you want to collect 24/7 then having a machine that doesn&#8217;t consume a lot of power is recommended where electricity prices are high.</p>
</div>
<div class="paragraph">
<p>Collecting and indexing have quite different requirements as well, so we split the hardware requirements section into two separate chapters.</p>
</div>
<div class="paragraph">
<p>The requirements mentioned here could be built from used/commodity hardware if necessary to keep the prices low.</p>
</div>
<div class="sect2">
<h3 id="_collecting">Collecting</h3>
<div class="paragraph">
<p>The resources used by collecting will be limited most likely by the bandwidth of your connection.
The CPU requirements can be quite high because the documents are verified and validated to avoid corrupt documents littering the archive.</p>
</div>
<div class="sect3">
<h4 id="_recommended_hardware">Recommended hardware</h4>
<div class="sect4">
<h5 id="_collecting_small_amounts_1_25_million">Collecting small amounts (1 - 25 million)</h5>
<div class="ulist">
<ul>
<li>
<p><strong>CPU</strong>: <a href="http://www.cpu-world.com/CPUs/Zen/AMD-Ryzen%205%203600.html">AMD Ryzen 5 3600</a> or similar</p>
</li>
<li>
<p><strong>Memory</strong>: 32 GB DDR4</p>
</li>
<li>
<p><strong>Disc space</strong>: ~1 - 25 TB</p>
</li>
<li>
<p><strong>Network</strong>: 100 Mbps</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_collecting_medium_amounts_25_100_million">Collecting medium amounts (25 - 100 million)</h5>
<div class="ulist">
<ul>
<li>
<p><strong>CPU</strong>: <a href="http://www.cpu-world.com/CPUs/Zen/AMD-Ryzen%207%203800X.html">AMD Ryzen 7 3800X</a> or similar</p>
</li>
<li>
<p><strong>Memory</strong>: 48 GB DDR4</p>
</li>
<li>
<p><strong>Disc space</strong>: ~25 - 100 TB</p>
</li>
<li>
<p><strong>Network</strong>: 500 Mbps</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_collecting_massive_amounts_100_500_million">Collecting massive amounts (100 - 500+ million)</h5>
<div class="ulist">
<ul>
<li>
<p><strong>CPU</strong>: <a href="http://www.cpu-world.com/CPUs/Zen/AMD-Ryzen%209%203950X.html">AMD Ryzen 9 3950X</a> or similar</p>
</li>
<li>
<p><strong>Memory</strong>: 64 GB DDR4</p>
</li>
<li>
<p><strong>Disc space</strong>: ~100 - 500 TB</p>
</li>
<li>
<p><strong>Network</strong>: 500 - 1000 Mbps</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_indexing">Indexing</h3>
<div class="sect3">
<h4 id="_recommended_hardware_2">Recommended hardware</h4>
<div class="paragraph">
<p>Indexing should either be run on a different machine than collecting or the memory and disc requirements should be added together.</p>
</div>
<div class="paragraph">
<p>You can do the indexing on any machine that has sufficient memory requirements, but without a proper CPU, your indexing speed could be slow.</p>
</div>
<div class="sect4">
<h5 id="_indexing_small_amounts_1_25_million">Indexing small amounts (1 - 25 million)</h5>
<div class="ulist">
<ul>
<li>
<p><strong>CPU</strong>: <a href="http://www.cpu-world.com/CPUs/Zen/AMD-Ryzen%205%203600.html">AMD Ryzen 5 3600</a> or similar</p>
</li>
<li>
<p><strong>Memory</strong>: 64 GB</p>
</li>
<li>
<p><strong>Disc space</strong>: 256-1024 GB SSD</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_indexing_medium_amounts_25_100_million">Indexing medium amounts (25 - 100 million)</h5>
<div class="ulist">
<ul>
<li>
<p><strong>CPU</strong>: <a href="http://www.cpu-world.com/CPUs/Zen/AMD-Ryzen%207%203800X.html">AMD Ryzen 7 3800X</a> or similar</p>
</li>
<li>
<p><strong>Memory</strong>: 64 GB</p>
</li>
<li>
<p><strong>Disc space</strong>: 1-4 TB SSD</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_indexing_massive_amounts_100_500_million">Indexing massive amounts (100 - 500+ million)</h5>
<div class="ulist">
<ul>
<li>
<p><strong>CPU</strong>: <a href="http://www.cpu-world.com/CPUs/Zen/AMD-Ryzen%209%203950X.html">AMD Ryzen 9 3950X</a> or similar</p>
</li>
<li>
<p><strong>Memory</strong>: 16 GB memory for each 100 million documents and 32GB+ for the Indexer Application, the exact value depends on what parallelism level is being used</p>
</li>
<li>
<p><strong>Disc space</strong>: 4 TB SSD for each 100 million documents</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Installing the applications and the prerequisite software is quite straightforward. At this time we provide a guide to the Windows-based systems. Installing the project suite on Linux systems are supported as well but requires more technical knowledge. An ideal deployment is running the apps in separate VMs or Docker containers but for the sake of simplicity, we are not doing that in this guide. In the future, we will create a more advanced guide.</p>
</div>
<div class="sect2">
<h3 id="_installing_java">Installing Java</h3>
<div class="paragraph">
<p>First, you need to download the Java 17 Runtime Environment. It&#8217;s available <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">here</a>. After the download is complete you should run the installer and follow the directions it provides until the installation is complete.</p>
</div>
<div class="paragraph">
<p>Once it&#8217;s done, if you open a command line (write cmd to the Start menu&#8217;s search bar) you will be able to use the java command. Try to write <code>java -version</code>. You should get something similar:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java version "15" 2020-09-15
Java(TM) SE Runtime Environment (build 15+36-1562)
Java HotSpot(TM) 64-Bit Server VM (build 15+36-1562, mixed mode, sharing)</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_mongodb">Installing MongoDB</h3>
<div class="paragraph">
<p>Download MongoDB 5.0 from <a href="https://www.mongodb.com/download-center/community">here</a>. After the download is complete run the installer and follow the directions it provides. If it&#8217;s possible, install the MongoDB Compass tool as well because you will need it later for administrative tasks.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_conductor_application">Running the Conductor Application</h3>
<div class="paragraph">
<p>You can download the <a href="#_conductor_application">Conductor Application</a> files at our <a href="https://github.com/bottomless-archive-project/library-of-alexandria/releases">release page</a>. Please take care to choose a non "pre-release" version!</p>
</div>
<div class="paragraph">
<p>After the download is complete run the application via the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-conductor-application-{release-number}.jar ...</pre>
</div>
</div>
<div class="paragraph">
<p>In the place of the &#8230;&#8203; you should write the various parameters. For the available parameters check the parameter list under the <a href="#_conductor_application">Conductor Application</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_staging_application">Running the Staging Application</h3>
<div class="paragraph">
<p>You can download the <a href="#_staging_application">Staging Application</a> files at our <a href="https://github.com/bottomless-archive-project/library-of-alexandria/releases">release page</a>. Please take care to choose a non "pre-release" version!</p>
</div>
<div class="paragraph">
<p>After the download is complete run the application via the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-staging-application-{release-number}.jar ...</pre>
</div>
</div>
<div class="paragraph">
<p>In the place of the &#8230;&#8203; you should write the various parameters. For the available parameters check the parameter list under the <a href="#_staging_application">Staging Application</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_queue_application">Running the Queue Application</h3>
<div class="paragraph">
<p>You can download the <a href="#_queue_application">Queue Application</a> files at our <a href="https://github.com/bottomless-archive-project/library-of-alexandria/releases">release page</a>. Please take care to choose a non "pre-release" version!</p>
</div>
<div class="paragraph">
<p>After the download is complete run the application via the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-queue-application-{release-number}.jar ...</pre>
</div>
</div>
<div class="paragraph">
<p>In the place of the &#8230;&#8203; you should write the various parameters. For the available parameters check the parameter list under the <a href="#_queue_application">Queue Application</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_vault_application">Running the Vault Application</h3>
<div class="paragraph">
<p>You can download the <a href="#_vault_application">Vault Application</a> files at our <a href="https://github.com/bottomless-archive-project/library-of-alexandria/releases">release page</a>. Please take care to choose a non "pre-release" version!</p>
</div>
<div class="paragraph">
<p>After the download is complete run the application via the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-vault-application-{release-number}.jar ...</pre>
</div>
</div>
<div class="paragraph">
<p>In the place of the &#8230;&#8203; you should write the various parameters. For the available parameters check the parameter list under the <a href="#_vault_application">Vault Application</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_generator_application">Running the Generator Application</h3>
<div class="paragraph">
<p>You can download the <a href="#_generator_application">Generator Application</a> files at our <a href="https://github.com/bottomless-archive-project/library-of-alexandria/releases">release page</a>. Please take care to choose a non "pre-release" version!</p>
</div>
<div class="paragraph">
<p>After the download is complete run the application via the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-generator-application-{release-number}.jar ...</pre>
</div>
</div>
<div class="paragraph">
<p>In the place of the &#8230;&#8203; you should write the various parameters. For the available parameters check the parameter list under the <a href="#_generator_application">Generator Application</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_downloader_application">Running the Downloader Application</h3>
<div class="paragraph">
<p>You can download the <a href="#_downloader_application">Downloader Application</a> files at our <a href="https://github.com/bottomless-archive-project/library-of-alexandria/releases">release page</a>. Please take care to choose a non "pre-release" version!</p>
</div>
<div class="paragraph">
<p>After the download is complete run the application via the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-downloader-application-{release-number}.jar ...</pre>
</div>
</div>
<div class="paragraph">
<p>In the place of the &#8230;&#8203; you should write the various parameters. For the available parameters check the parameter list under the <a href="#_downloader_application">Downloader Application</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_elasticsearch">Installing Elasticsearch</h3>
<div class="paragraph">
<p>Elasticsearch is only necessary for indexing! If you only want to collect the PDF documents then it&#8217;s unnecessary for you!</p>
</div>
<div class="paragraph">
<p>You can download Elasticsearch 8.3.1 <a href="https://www.elastic.co/downloads/past-releases/elasticsearch-8-3-1">here</a>.</p>
</div>
<div class="paragraph">
<p>After the download complete unzip it. You also need to do some slight adjustments to the default configuration.</p>
</div>
<div class="paragraph">
<p>Go to the elasticsearch/config folder. Open the jvm.options file in the text editor and edit the following parameters to adjust the memory. We suggest setting at least 4 GB of memory for Elasticsearch. Even if you don&#8217;t have a lot of files.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>-Xms1g
-Xmx1g</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>-Xms4g
-Xmx4g</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to change the data directory then open the config/elasticsearch.yml file, uncomment the path.data and write the expected data path to it.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>path.data: C:\loa\indexer\data</pre>
</div>
</div>
<div class="paragraph">
<p>After this is done you are ready to run Elasticsearch by going into the elasticsearch folder and writing <code>.\bin\elasticsearch</code> to the console.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_indexer_application">Running the Indexer Application</h3>
<div class="paragraph">
<p>You can download the <a href="#_indexer_application">Indexer Application</a> files at our <a href="https://github.com/bottomless-archive-project/library-of-alexandria/releases">release page</a>. Please take care to choose a non "pre-release" version!</p>
</div>
<div class="paragraph">
<p>After the download is complete run the application via the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-indexer-application-{release-number}.jar ...</pre>
</div>
</div>
<div class="paragraph">
<p>In the place of the &#8230;&#8203; you should write the various parameters. For the available parameters check the parameter list under the <a href="#_indexer_application">Indexer Application</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_web_application">Running the Web Application</h3>
<div class="paragraph">
<p>You can download the <a href="#_web_application">Web Application</a> files at our <a href="https://github.com/bottomless-archive-project/library-of-alexandria/releases">release page</a>. Please take care to choose a non "pre-release" version!</p>
</div>
<div class="paragraph">
<p>After the download is complete run the application via the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-web-application-{release-number}.jar ...</pre>
</div>
</div>
<div class="paragraph">
<p>In the place of the &#8230;&#8203; you should write the various parameters. For the available parameters check the parameter list under the <a href="#_web_application">Web Application</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_applications">Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Library of Alexandria project consists of more than one (usually) scalable applications.
Not all of them are mandatory for the archiving effort.
Some of them are created for administrating or maintenance purposes.</p>
</div>
<div class="sect2">
<h3 id="_architectural_overview">Architectural overview</h3>
<div class="paragraph">
<p>The collection of documents starts with the <a href="#_generator_application">Generator Application</a>. The <a href="#_generator_application">Generator Application</a> is responsible to create <strong>document locations</strong> (known URLs where documents could be available). These locations are passed to the <a href="#_queue_application">Queue Application</a> where they are stored until a <a href="#_downloader_application">Downloader Application</a> picks them up and visit the location to get new <strong>documents</strong>. Then the downloaded document is sent to a new queue in the <a href="#_queue_application">Queue Application</a>. After a while a <a href="#_vault_application">Vault Application</a> will pick up a document and <strong>archive</strong> it. If indexing is being done then every archived document will be indexed by the <a href="#_indexer_application">Indexer Application</a> and made searchable by the <a href="#_web_application">Web Application</a>. The communication of the connection information between these applications are made available by the <a href="#_conductor_application">Conductor Application</a> using <a href="https://en.wikipedia.org/wiki/Service_discovery">service discovery</a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="assets/images/architecture.svg" alt="architecture">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_application_parameters">Application parameters</h3>
<div class="paragraph">
<p>This section describes each supported parameter for every application. Supplying these runtime parameters can be done by adding them to the runtime arguments of the application with the <code>--</code> prefix. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -jar loa-downloader-application-{release-number}.jar --loa.downloader.parallelism=10</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conductor_application">Conductor Application</h3>
<div class="sect3">
<h4 id="_workflow">Workflow</h4>
<div class="paragraph">
<p>Every application that is the part of the Library of Alexandria suite uses this application for <a href="https://en.wikipedia.org/wiki/Service_discovery">service discovery</a> purposes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.database.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host location of the MongoDB database server. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.database.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port open for the MongoDB database server. <strong>(Default value: 27017)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.database.uri</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If present and not empty, it overrides the host and port parameter. Let the user inject a <a href="https://docs.mongodb.com/manual/reference/connection-string/">MongoDB Connection String</a> directly. Should be used to define the credentials and other custom connection parameters. <strong>(Default value: "")</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.database.no-cursor-timeout</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whenever the cursor objects created by the application should be able to timeout. Ideally you would set up the timeout on your MongoDB server (see: <a href="https://docs.mongodb.com/manual/reference/parameters/#param.cursorTimeoutMillis">cursorTimeoutMillis</a>) but because not everybody is a MongoDB expert, we disable timeouts by default. This could cause a couple of open cursors (so extra resource usage) on the MongoDB server when the application crashes for some reason, and the cursors are not closed correctly. If you set the cursor timeout too low, then the application will crash if it is not able to process a batch of items under the provided timeout. <strong>(Default value: true)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.indexer.database.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host of the Elasticsearch database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.indexer.database.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port of the Elasticsearch database.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_queue_application">Queue Application</h3>
<div class="paragraph">
<p>This application&#8217;s goal is to provide an abstraction layer between the applications.</p>
</div>
<div class="sect3">
<h4 id="_workflow_2">Workflow</h4>
<div class="paragraph">
<p>The Queue Application is a simple glue between the <a href="#_vault_application">Vault Application</a>, <a href="#_downloader_application">Downloader Application</a>, and <a href="#_generator_application">Generator Application</a>. It exists to make these applications tightly coupled and scalable. It works as a <a href="https://en.wikipedia.org/wiki/Message_queue">message queue</a> provider between these processes. It has two queues.</p>
</div>
<div class="paragraph">
<p>The <strong>loa-document-location</strong> contains the URLs that should be visited for document downloading. It is connecting the <a href="#_generator_application">Generator Application</a> and the <a href="#_downloader_application">Downloader Application</a>.</p>
</div>
<div class="paragraph">
<p>The <strong>loa-document-archiving</strong> contains the metadata for the downloaded documents thats are in the staging area. It connects the <a href="#_downloader_application">Downloader Application</a> and the <a href="#_vault_application">Vault Application</a>.</p>
</div>
<div class="paragraph">
<p>Both of these queues are persistent, so if the Queue Application is stopped, the messages are not going to be lost.</p>
</div>
<div class="paragraph">
<p>The queues contain only basic text (like urls) and metadata (like content length, file type, etc). All of this data is sent in a binary format, so it is fairly compact. Because of this, the whole application doesn&#8217;t require a lot of storage space. A big deployment might need around 100 GB, while a small-is deployment can fit on around 10 GB. The data access pattern consist of a lot of small IO operations. Because of this, an SSD is recommended for storing the application&#8217;s data.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location (ip address or domain) of the <a href="#_conductor_application">Conductor Application</a>. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the <a href="#_conductor_application">Conductor Application</a> is listening for new connections. <strong>(Default value: 8092)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the type of the application. If this property is set to <code>QUEUE_APPLICATION</code> then this application will be registered as a Queue Application. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the port that this application reports as the listening port. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.queue.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the application should listen. <strong>(Default value: 61616)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.queue.data-directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location where the queue should save its contents. It should be a folder on the filesystem.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_vault_application">Vault Application</h3>
<div class="paragraph">
<p>Responsible for storing documents and making them available via web endpoints.</p>
</div>
<div class="sect3">
<h4 id="_workflow_3">Workflow</h4>
<div class="paragraph">
<p>The Vault Application connects to the <a href="#_queue_application">Queue Application</a>, asks for the metadata of new documents that should be archived (these were inserted by the <a href="#_downloader_application">Downloader Application</a> to the queue previously).</p>
</div>
<div class="paragraph">
<p>When a metadata entry is acquired, the application will look up if the document is a duplicate. If it is, then it updates the document&#8217;s entry in the database to contain the new source for the document, then asks the <a href="#_staging_application">Staging Application</a> to remove the document&#8217;s content from the staging area. If it is not a duplicate, then it saves the new document entity to the database, then downloads the document&#8217;s content from the <a href="#_staging_application">Staging Application</a> into a vault location that is available either on local disk or in an AWS S3 compatible storage.</p>
</div>
<div class="paragraph">
<p>The Vault Application is scalable so more than one instance can run at the same time. This is necessary to support more than one storage machines. Each instance of the application has an unique name. When a document is stored, then the vault&#8217;s name that is holding the document&#8217;s content is also saved to the document&#8217;s metadata in the database. This way it is easy to track which vault instance has which document.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location (ip address or domain) of the <a href="#_conductor_application">Conductor Application</a>. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the <a href="#_conductor_application">Conductor Application</a> is listening for new connections. <strong>(Default value: 8092)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the type of the application. If this property is set to <code>VAULT_APPLICATION</code> then this application will be registered as a Vault Application. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the port that this application reports as the listening port. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.vault.location.type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the type of the vault&#8217;s location. At the moment it could be <code>file</code> only but in the future, we plan to support more location types. When it&#8217;s set to <code>file</code> then the vault will be located on the local filesystem. <strong>(Default value: file)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.vault.location.file.path</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used only when <code>loa.vault.location.type</code> is set to <code>file</code>. Path to the location of the vault on the filesystem.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>server.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the vault should publish its web endpoints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.vault.name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique name of the vault. This name will be saved when archiving new documents and will be used to identify the vault that holds a given document. Do not change this after creating the vault because the documents previously archived by this vault are not going to be accessible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.vault.parallelism</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of documents that should be saved in parallel at the same time. If the value is set to 4, then the application tries to archive 4 documents at the same time. <strong>(Default value: 20)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.vault.modification-enabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this vault should be able to modify documents (eg. remove) after they are archived. If your vault is available publicly on the internet then set this to false! <strong>(Default value: true)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.vault.archiving</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this vault should archive new documents. <strong>(Default value: true)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.vault.version-number</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This version number will be saved to the database for every document that has been archived. It will be used later on if it is necessary to run cleanup or fixing tasks that are specific to a given version. This way it will be easier to fix bugs or database inconsistencies introduced by a specific application version. Please do not change this, otherwise the official migration/fixer utilities are not going to be usable. <strong>(Default value: 6)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.vault.staging-directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A staging directory for temporary files when a recompression is required.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_generator_application">Generator Application</h3>
<div class="paragraph">
<p>This application&#8217;s goal is to fill the <a href="#_queue_application">Queue Application</a> with downloadable document locations (links/urls).</p>
</div>
<div class="sect3">
<h4 id="_workflow_4">Workflow</h4>
<div class="paragraph">
<p>The Generator Application connects to the <a href="#_queue_application">Queue Application</a> and send URLs to be checked and downloaded by the <a href="#_downloader_application">Downloader Application</a>.</p>
</div>
<div class="paragraph">
<p>These URLs can come from a file that is either encrypted (with GZIP) or plain text. The file is read line by line. Each line should represent a document location.</p>
</div>
<div class="paragraph">
<p>The URLs are validated by the <a href="#_generator_application">Generator Application</a>. So if an url doesn&#8217;t end with one of the supported file types (ie.: .pdf, .doc, .docx, etc) then it is not going to be added to the document location queue. Also, other illegal or invalid urls will be filtered out too.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you do not have a lot of URLs ready at hand, take a look into the <a href="https://github.com/bottomless-archive-project/url-collector">url-collector</a> project or into the <a href="https://github.com/bottomless-archive-project/document-location-database">document-location-database</a>. These projects are also curated by the <em>Bottomless Archive Project</em> and are created for the specific purpose to give easy access for LoA users to a lot of possible document locations.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location (ip address or domain) of the <a href="#_conductor_application">Conductor Application</a>. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the <a href="#_conductor_application">Conductor Application</a> is listening for new connections. <strong>(Default value: 8092)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the type of the application. If this property is set to <code>GENERATOR_APPLICATION</code> then this application will be registered as a Generator Application. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the port that this application reports as the listening port. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.source.name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the source location. This name will be saved to the database for every crawled document. It could be helpful for statistics collection or in identifying bugs and errors with specific sources. <strong>(Default value: unknown)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.source.type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the type of the source. The only one supported at the moment is <code>file</code>. If the value is file then the location data will be loaded from a local file. A location is represented as one line inside the file. <strong>(Default value: file)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.source.file.location</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used only when <code>loa.source.type</code> is set to <code>file</code>. The location of the source file on the disk. It&#8217;s not a problem if it contains non-pdf files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.source.file.encoding</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used only when <code>loa.source.type</code> is set to <code>file</code>. It can be set to <code>none</code> or gzip. If it&#8217;s set to <code>none</code> then the file will be read as a non-compressed file. If it&#8217;s set to <code>gzip</code> then it will be read as a gzipped file, being unzipped on the fly. <strong>(Default value: none)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.source.file.skip-lines</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip the number of lines before starting to process the document locations in the file. Can be used to quickly get back to the last processed line if the application is restarted for any reason. <strong>(Default value: 0)</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_staging_application">Staging Application</h3>
<div class="paragraph">
<p>This application is responsible for holding documents before they are being moved to their final place in one of the <a href="#_vault_application">Vault Application</a> instances.</p>
</div>
<div class="sect3">
<h4 id="_workflow_5">Workflow</h4>
<div class="paragraph">
<p>The <a href="#_staging_application">Staging Application</a> is a very simple webserver that has three endpoints.</p>
</div>
<div class="paragraph">
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST">POST</a> endpoint stores documents on the staging location.</p>
</div>
<div class="paragraph">
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET">GET</a> endpoint return the stored document on the staging location and removes it from the stage.</p>
</div>
<div class="paragraph">
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/DELETE">DELETE</a> endpoint removes the stored document from the staging location. This endpoint is only used when the <a href="#_vault_application">Vault Application</a> determines that the document is a duplicate based on its checksum, filesize and type. In this case, downloading the document is not needed, it can safely be removed.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location (ip address or domain) of the <a href="#_conductor_application">Conductor Application</a>. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the <a href="#_conductor_application">Conductor Application</a> is listening for new connections. <strong>(Default value: 8092)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the type of the application. If this property is set to <code>STAGING_APPLICATION</code> then this application will be registered as a Staging Application. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the port that this application reports as the listening port. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.staging.location</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where should the <a href="#_staging_application">Staging Application</a> put the files it acquires for staging.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_downloader_application">Downloader Application</h3>
<div class="paragraph">
<p>This application grabs the document locations from the <a href="#_queue_application">Queue Application</a> and downloads the documents from those locations.</p>
</div>
<div class="sect3">
<h4 id="_workflow_6">Workflow</h4>
<div class="paragraph">
<p>The <a href="#_downloader_application">Downloader Application</a> connects to the <a href="#_queue_application">Queue Application</a>, grabs document locations from the document location queue.</p>
</div>
<div class="paragraph">
<p>Then the documents are validated and the valid documents being sent to the <a href="#_staging_application">Staging Application</a>. If compression is enabled, then the documents are compressed before being uploaded.</p>
</div>
<div class="paragraph">
<p>Some document metadata is also put into the document queue on the <a href="#_queue_application">Queue Application</a>.</p>
</div>
<div class="paragraph">
<p>The metadata is necessary, so the <a href="#_vault_application">Vault Application</a> will be able to download the document from the <a href="#_staging_application">Staging Application</a> and archive it.</p>
</div>
<div class="paragraph">
<p>The <a href="#_downloader_application">Downloader Application</a> is scalable so if one machine is working at full capacity (either it&#8217;s at 100% CPU or RAM), but the network is still not saturated, a new application can be started on a different machine.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location (ip address or domain) of the <a href="#_conductor_application">Conductor Application</a>. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the <a href="#_conductor_application">Conductor Application</a> is listening for new connections. <strong>(Default value: 8092)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the type of the application. If this property is set to <code>DOWNLOADER_APPLICATION</code> then this application will be registered as a Downloader Application. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the port that this application reports as the listening port. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.staging-directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location where the document files are first downloaded. After some validation and occasionally modification (compression etc) it is moved to the vault. <strong>(Default value: temp folder)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.version-number</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version number that should be saved as the downloader version to the database when a new document is inserted. Can be used for debugging, cleanups and so on. <strong>(Default value: 6)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.source</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Two types of document sources are supported by the downloader application. One of this is the <code>QUEUE</code> source, where the application get the possible locations of documents (URLs), and download them from there, then sends them for archiving. The other one is <code>FOLDER</code>, where the application load document files from a provided folder on the filesystem, and sends them for archiving. <strong>(Default value: QUEUE)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.parallelism</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many connections should be open at any given time to download documents in parallel. If the value is set to 4, then the application tries to download 4 documents at the same time. Your internet speed might allow more parallel downloads, in that case, increase this value. <strong>(Default value: 3)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.source.folder.location</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location on the filesystem where the downloader should load the files from in case of the source set to <code>FOLDER</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.source.folder.should-remove</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When the source is set to <code>FOLDER</code>, should the application remove the files after processing from the folder. Useful when there are a lot of entries in the directory and can&#8217;t be processed with one go. <strong>(Default value: false)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.source.source-name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the source location. This name will be saved to the database for every crawled document in case of the source set to <code>FOLDER</code>. It could be helpful for statistics collection or in identifying bugs and errors with specific sources. For non-folder sources, this value is provided by the <a href="#_generator_application">Generator Application</a>. <strong>(Default value: unknown)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.validation.maximum-archive-size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a document&#8217;s size in bytes is bigger than the provided value, then the archiving step will be skipped. Too big documents can use up way too much space, compared to how useful they are. This parameter could be used to defend against this problem. Also, if the disk space on the stage location is lower than this value, the processing will stop to guard against filling the disk fully and breaking the processing algorithm. <strong>(Default value: 8589934592 bytes aka 8 GB)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.compression.algorithm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property describes what compression algorithm should be used while saving documents to the vault. The available values are <code>lzma</code>, <code>gzip</code>, <code>none</code>. <a href="https://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Markov_chain_algorithm">LZMA</a> has the best compression ratios while being quite CPU resource-intensive, <a href="https://en.wikipedia.org/wiki/Gzip">GZIP</a> is better than no compression, but a little worse than LZMA while having minimal CPU footprint while <code>none</code> is saving the documents without compression. <strong>(Default value: gzip)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.checksum.type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of the hashing algorithm used to create the document&#8217;s checksum. At the moment only <code>SHA256</code> is available for this purpose. <strong>(Default value: sha256)</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_indexer_application">Indexer Application</h3>
<div class="paragraph">
<p>This application makes documents searchable by inserting them into an Elasticsearch cluster.</p>
</div>
<div class="sect3">
<h4 id="_workflow_7">Workflow</h4>
<div class="paragraph">
<p>The Indexer Application is responsible to index the documents into <a href="https://www.elastic.co/what-is/elasticsearch">Elasticsearch</a>. The indexed documents will be searchable by the <a href="#_web_application">Web Application</a>.</p>
</div>
<div class="paragraph">
<p>The application queries document that has the <code>DOWNLOADED</code>, download the document&#8217;s content from the responsible <a href="#_vault_application">Vault Application</a>, extract the data and metadata from the content and saves it into the Elasticsearch cluster.</p>
</div>
<div class="paragraph">
<p>After a document is inserted into Elasticsearch, it can be searched by the <a href="#_web_application">Web Application</a>. Not indexed document&#8217;s can&#8217;t be searched and opened on the web UI.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.parallelism</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many documents should be indexed in parallel at any given time. If the value is set to 4, then the application tries to index 4 documents at the same time. <strong>(Default value: 3)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.downloader.batch-size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of documents to index that the application queries with each round-trip to the database. If the cursor timeout error happens frequently, this parameter should be set to a lower value. This would change the application to do more frequent calls to the database, lowering the chance of a timeout. <strong>(Default value: 10)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location (ip address or domain) of the <a href="#_conductor_application">Conductor Application</a>. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the <a href="#_conductor_application">Conductor Application</a> is listening for new connections. <strong>(Default value: 8092)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the type of the application. If this property is set to <code>INDEXER_APPLICATION</code> then this application will be registered as a Indexer Application. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the port that this application reports as the listening port. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_web_application">Web Application</h3>
<div class="paragraph">
<p>The Web Application provides access to the users to the indexed documents.</p>
</div>
<div class="sect3">
<h4 id="_workflow_8">Workflow</h4>
<div class="paragraph">
<p>The application run queries on the Elasticsearch cluster and display the results. If the user wants to request a document, it will reach out to the <a href="#_vault_application">Vault Application</a> to download the requested document. The dashboard screen also uses the <a href="#_queue_application">Queue Application</a> to show how many messages are waiting for processing by the various applications.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location (ip address or domain) of the <a href="#_conductor_application">Conductor Application</a>. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the <a href="#_conductor_application">Conductor Application</a> is listening for new connections. <strong>(Default value: 8092)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the type of the application. If this property is set to <code>WEB_APPLICATION</code> then this application will be registered as a Web Application. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the port that this application reports as the listening port. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.indexer.database.enabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the Elasticsearch connection should be enabled. Sometimes you want to run the application without connecting to Elasticsearch (just to view the dashboard etc). <strong>(Default value: true)</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_api_endpoints">API endpoints</h4>
<div class="paragraph">
<p>The Web Application is a bit special compared to the others, because it exposes web endpoints as well. These endpoints are mostly used by the UI, but can be used as an API as well if necessary.</p>
</div>
<div class="sect4">
<h5 id="_general_endpoints">General endpoints</h5>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
</div>
<div class="sect4">
<h5 id="_debug_endpoints">Debug endpoints</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. APIs</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>/document/{documentId}/debug</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns all the data that is available about the document in the database. This endpoint is created mainly because it is hard to search documents by id in MongoDB when the id is represented in binary.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_administrator_application">Administrator Application</h3>
<div class="paragraph">
<p>This application&#8217;s goal is to provide basic database administrator tasks (query statistics, initiate the re-crawling of failed tasks, etc).</p>
</div>
<div class="sect3">
<h4 id="_workflow_9">Workflow</h4>
<div class="paragraph">
<p>The workflow for the <a href="#_administrator_application">Administrator Application</a> is different for every command. Please look into the commands table for documentation on the individual commands.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.command.name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the command to run. (See the commands table bellow.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location (ip address or domain) of the <a href="#_conductor_application">Conductor Application</a>. <strong>(Default value: localhost)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port where the <a href="#_conductor_application">Conductor Application</a> is listening for new connections. <strong>(Default value: 8092)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the type of the application. If this property is set to <code>ADMINISTRATOR_APPLICATION</code> then this application will be registered as a Administrator Application. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.conductor.application-port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the port that this application reports as the listening port. This property is pre-configured for each service. <strong>Don&#8217;t change it!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.indexer.database.host</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host of the Elasticsearch database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.indexer.database.port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port of the Elasticsearch database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loa.administrator.staging-directory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required only for the <code>recollect-corrupt-documents</code> command. The location where the document files are first downloaded. After some validation and occasionally modification (compression etc) it is moved to the vault. <strong>(Default value: temp folder)</strong></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Commands</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">reindex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This task will reset every document&#8217;s status to <code>DOWNLOADED</code>. It is useful if a full reindex is needed via the Indexer Application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">silent-compressor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This command will go through every document in the database and ask the <a href="#_vault_application">Vault Application</a> to recompress them when the provided compression algorithm is not the same as provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cleanup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Removes every document with status <code>CORRUPT</code>. The documents will be removed from the <a href="#_vault_application">Vault Application</a> and the database too.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recollect-corrupt-documents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tries to recollect every document with status <code>CORRUPT</code>. The document&#8217;s <code>sourceLocations</code> variable stores the ids of the document locations where the document was collected from. This command will try to re-download the document from these source locations. If any of the downloads is successful, then the document&#8217;s content will be replaced with non-corrupt data (effectively reconstructing the document). If all of the downloads fails, then the <code>CORRUPT</code> status will be kept.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">register-user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers a user into the application suite. The <code>loa.command.register-user.name</code> and the <code>loa.command.register-user.password</code> parameters should be provided.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_disc_usage_patterns">Disc usage patterns</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Because of it&#8217;s distributed nature, the application might show some unusual disc usage patterns.
For example, every document is written 4 times to various media.
It <em>might</em> be important to put these folders on different physical discs for performance or durability reasons.</p>
</div>
<div class="paragraph">
<p>This part of the documentation exists so users have a better understanding of what usage patterns they might expect for different applications/folders.</p>
</div>
<div class="sect2">
<h3 id="_queue_data_directory">Queue Data Directory</h3>
<div class="paragraph">
<p>The <strong>Queue Application&#8217;s</strong> <strong>loa.queue.data-directory</strong> is usually small in size.
The files in this folder are usually memory-mapped so any kind of generic SSD might work for this folder.
It stores the intermittent messaging between the applications.
This usually consist of the URLs to download, adn the metadata of the documents until they are moved into the vault.
Even when processing large amount of URLs or documents, the size of this folder should be under 50-100 GB.
For example, 200 million URLs in the downloader queue takes up around 30 GB of disk space.</p>
</div>
</div>
<div class="sect2">
<h3 id="_temporary_stage_folders">Temporary Stage Folders</h3>
<div class="paragraph">
<p>The <strong>Downloader Application, Vault Application, Beacon Application and Administrator Application</strong> has its own stage directory, where files are downloaded temporarily, before they are getting verified and validated or processed further in any way.
It exists because we don&#8217;t want to store every document that is under processing by the respective application in the memory.
For some documents, the app downloads 500 MBs, but it fails to validate in the first few bytes (PDFs are parsed from the end of the file).
In this case it is pointless and very wasteful to hold the whole document in memory.
Because of this, the files in this folder are very short-lived.
They are deleted almost immediately after the downloading is finished.</p>
</div>
</div>
<div class="sect2">
<h3 id="_staging_data_directory">Staging Data Directory</h3>
<div class="paragraph">
<p>The <strong>Staging Application&#8217;s</strong> <strong>loa.staging.path</strong> folder is used as a temporary location for documents, before they are permanently moved into a vault.
When the Downloader Application download the file, and it appears to be a valid document, then the Downloader sends its content to the Staging Application.
The Staging Application stores the content of the documents in this folder.
As soon as a Vault Application stores the document in its vault (grabbing the document&#8217;s content from the Staging Application in the process), the file belonging to that document will be removed from this folder.
The only time when documents can pile up in this folder, is if when no vaults running (and archiving), but the Downloader still downloads new documents.
Under normal operation, this folder should never grow out of hand.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vault_data_directory">Vault Data Directory</h3>
<div class="paragraph">
<p>The <strong>Vault Application&#8217;s</strong> <strong>loa.vault.location.file.path</strong> is a permanent folder. This is where every document will end up if the vault&#8217;s backed is <code>FILE</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_domain_language">Domain Language</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Language elements</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Vault</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location where the collected documents are archived.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Document</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A document collected from the internet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Staging area</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A temporary location where the collected documents placed for post processing before going to the archive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Source</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A source of document locations. At the moment, it can only be a file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Failure rate</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many documents fail to download compared to the successfully downloaded ones.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Archiving</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Saving a document into the vault.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-02-07 12:13:53 +0100
</div>
</div>
</body>
</html>